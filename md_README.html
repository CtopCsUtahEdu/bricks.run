<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Brick Library: Brick Layout for C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Brick Library
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Performance-portable stencil datalayout &amp; codegen</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="structBrick.html" title="Generic base template, see Brick&lt; Dim&lt; BDims... &gt;, Dim&lt; Folds... &gt; &gt;">Brick</a> Layout for C++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>***Distributed Performance-portable Stencil Compuitation - <a href="https://bricks.run">Documentation@bricks.run</a>***</p>
<h1><a class="anchor" id="autotoc_md32"></a>
Requirements</h1>
<ul>
<li><em>C++14</em> compatible compiler</li>
<li>OpenMP</li>
<li>MPI library</li>
<li>CMake</li>
<li><b>Optional</b> backends<ul>
<li><em>CUDA</em></li>
<li><em>OpenCL</em></li>
<li><em>SYCL</em></li>
<li><em>HIP</em> <b>WIP</b></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
Building and running</h1>
<ol type="1">
<li>Clone the repository</li>
<li>Create a build directory inside the source tree <code>mkdir build</code></li>
<li>Create build configuration <code>cd build &amp;&amp; cmake .. -DCMAKE_BUILD_TYPE=Release</code></li>
<li>Build different test cases using <code>make &lt;testname&gt;</code></li>
</ol>
<p>For description of the test cases see <a class="el" href="md_docs_testcases.html">here</a>.</p>
<h1><a class="anchor" id="autotoc_md34"></a>
Using the brick template</h1>
<p>The brick template consists of 3 part:</p>
<ul>
<li><code><a class="el" href="structBrick.html" title="Generic base template, see Brick&lt; Dim&lt; BDims... &gt;, Dim&lt; Folds... &gt; &gt;">Brick</a></code>: declare brick data structure</li>
<li><code><a class="el" href="structBrickInfo.html" title="Metadata related to bricks.">BrickInfo</a></code>: an adjacency list that describes the relations between bricks</li>
<li><code><a class="el" href="structBrickStorage.html" title="Initializing and holding the storage of bricks.">BrickStorage</a></code>: a chunk of memory for storing bricks</li>
</ul>
<p>The behavior of such templated data structures are as normal: they do not require the use of code generator to function; provide a fallback way of writing code for compute &amp; data movement.</p>
<h1><a class="anchor" id="autotoc_md35"></a>
Stencil Expression Description</h1>
<p>Stencil expression for code generator are specified using <a class="el" href="md_docs_stencilExpr.html">Python library</a>. Code generator provide optimization and vectorization support for different backend.</p>
<p>The code generation are carried out by CMake wrapper automatically. For details, see [Codegen Integration]().</p>
<h1><a class="anchor" id="autotoc_md36"></a>
Dimension Ordering</h1>
<p>Template arguments &amp; code ordering is contiguous dimension last. Dimension arrays are contiguous at 0 (contiguous first).</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Directory &amp; Files</h2>
<ul>
<li><code>include</code> and <code>src</code> contains the brick library headers and library files.</li>
<li><code>docs</code> various documents</li>
<li><code>cmake</code> CMake module file</li>
<li>Included test cases are split into 4 folders:<ul>
<li><code>stencils</code> contains different stencils and related initialization code used by all tests as needed</li>
<li><code>single</code> for single node (no MPI)</li>
<li><code>weak</code> for weak scaling or strong scaling with one-level decomposition (one subdomain per rank)</li>
<li><code>strong</code> for strong scaling with two-level decomposition (multiple fixed-sized subdomains per rank)</li>
</ul>
</li>
</ul>
<p>A large portion of the brick library is entirely based on templates and can be included as a header only library.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Acknowledgements</h2>
<ul>
<li>This research was supported by the Exascale Computing Project (17-SC-20-SC), a joint project of the U.S. Department of Energy's Office of Science and National Nuclear Security Administration.</li>
<li>This research used resources of the Oak Ridge Leadership Facility at the Oak Ridge National Laboratory, which is supported by the Office of Science of the U.S. Department of Energy under Contract No. DE-AC05-00OR22725.</li>
<li>This research used resources of the Argonne Leadership Computing Facility at Argonne National Laboratory, which is supported by the Office of Science of the U.S. Department of Energy under contract DE-AC02-06CH11357.</li>
<li>This research used resources in Lawrence Berkeley National Laboratory and the National Energy Research Scientific Computing Center, which are supported by the U.S. Department of Energy Office of Scienceâ€™s Advanced Scientific Computing Research program under contract number DE-AC02-05CH11231.</li>
</ul>
<h2><a class="anchor" id="autotoc_md39"></a>
Publications</h2>
<p><a class="el" href="citelist.html#CITEREF_zhao2018">[1]</a> Zhao, Tuowen, Samuel Williams, Mary Hall, and Hans Johansen. "Delivering Performance-Portable Stencil Computations on CPUs and GPUs Using Bricks." In 2018 IEEE/ACM International Workshop on Performance, Portability and Productivity in HPC (P3HPC), pp. 59-70. IEEE, 2018.</p>
<p><a class="el" href="citelist.html#CITEREF_zhao2019">[2]</a> Zhao, Tuowen, Protonu Basu, Samuel Williams, Mary Hall, and Hans Johansen. "Exploiting reuse and vectorization in blocked stencil computations on CPUs and GPUs." In Proceedings of the International Conference for High Performance Computing, Networking, Storage and Analysis, p. 52. ACM, 2019. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
